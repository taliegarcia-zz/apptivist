<!doctype html>
<html>
    <head>
     
        <title>Apptivist</title>
        <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
        <script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
        
        {# this script-src address is not working #}
        <script src="/static/jscripts.js"></script>

    </head>

    <body>
      <h1>Apptivist</h1>
        <div class="homebar">

            <p><a href="/">Home</a></p>

            <!-- show if logged in or not -->
            {% if "user_id" in session %}
                <p><a href="/apptivist/{{ session["user_id"] }}">Profile Me</a></p>
                <p><a href="/new_post">Post a New Article</a></p>
                <p><a href="/logout">Log Out</a></p>
            {% else %}
                <p><a href="/login">Log In</a></p>
                <p><a href="/registration">Register</a></p>
                <p><a href="/add_article">***Add an Article to DB***</a></p>
            {% endif %}
        
        </div>


        <!-- Show flashed messages -->    
        <hr>

            {% for flash in get_flashed_messages() %}
              {{ flash }}
            {% endfor %}

            {% block content %}
                Put your body here.
            {% endblock %}

        <script>

            // This give me the data I want when a user clicks the form
            var actionObj = $('.actionLinks a').click( function(event) { 
                                      event.preventDefault();
                                      console.log(this.dataset)
                                      return this.dataset; 
                                    });

            // Need to figure out how to send the data to the server
            // using post?
            $.post("/action",
                actionObj, 
                success: function() {
                    alert('wow');
                });


            // the following is code examples I was looking at...

            // function get_action() { 
            //     $('.actionLinks a').click( function(event) { 
            //                           event.preventDefault();
            //                           console.log(this.dataset);
            //                           return this.dataset; 
            //                         }
            //                         );
            // };

            // function acceptChallenge(evt) {
            //         var data = $(evt.currentTarget).data();
            //         console.log(data.donation_item)
            //         var data_obj = { original_items: $("#orig").text(),
            //                         alternative_items: $(".alt").text(),
            //                         qty: $("#qty").val(),
            //                         donation_item: data.donation_item};
            //         var form = document.createElement('form');
            //         $(form).attr("method", "post").attr("action", "/profile");
            //         _.each(data_obj, function(value, key) {
            //             $("<input>").attr({
            //                 name: key,
            //                 value: value
            //             }).appendTo(form);
            //         });
            //         $(form).submit();
            //     }

        //     $("#submit_bttn").on("click", function (evt) {
        //                                     evt.preventDefault();
        //                                     var translated_text = $("#text_form_ta").val();

        //         $.ajax({
        //         url: "/save_text",
        //         data: $('form').serialize() + "&p_id=" + paragraphId,
        //         type: "POST",
        //         success: function(response) {
        //             $("#translate_textarea").hide();
        //             placeParagraph(response.translated_text, response.paragraph_id);
        //         },
        //         error: function(error) {
        //             console.log(error);
        //         }
        //     });
        // });



            // $.ajax({
            //     url: "/action",
            //     data: actionObj
            //     type: "POST",



            // // will this work out here? or will it try to run before actionObj is defined
            // // console.log(actionObj);

            // $('.actionLinks a').post( "/action",
            //     actionObj, // could call above .click function here and that would return actionObj here
            //     function (result) { console.log(result) }
            // );

            // $('.actionLinks a').post("/action",
            //     { name: 'Jessica', age: 27 },
            //     function (result) { alert(result) }
            //   );


            // actionObj = {
            //     "linktype": 'meetup',
            //     "articlId": '2',
            //     "tagId": '5'
            // }

            // @app.route('/new-student', methods=['POST'])
            // def add_student():
            //     name = request.form.get("name")
            //     age = request.form.get("age")
            //     # add to database here
            //     return "Added %s (age=%s)" % (name, age)

            // @app.route('/action/<action_object>', methods=['POST'])
            // def add_action_to_db(action_object):
            //     action_obj = jsonify(action_object)
               
            //     action_obj = Action(
            //         ===
            //         )
            //     return "Added %s (age=%s)" % (name, age)


        </script>

    </body>

</html>